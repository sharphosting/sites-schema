{
	"$schema": "http://json-schema.org/draft-04/schema#",
	"id": "https://sharphosting.uk/schemas/sites",
	"title": "Sites",
	"description": "Schema for data describing shared hosting website configurations.",
	"type": "object",
	"properties": {
		"web_server": {
			"type": "object",
			"properties": {
				"type": { "type": "string" },
				"user": { "type": "string" },
				"group": { "type": "string" }
			},
			"required": [ "type", "user", "group" ],
			"additionalProperties": false
		},
		"directory_structure": {
			"type": "object",
			"properties": {
				"user": { "type": "string" },
				"group": { "type": "string" },
				"d_mode": { "type": "string" },
				"f_mode": { "type": "string" },
				"directories": {
					"type": "object",
					"patternProperties": {
						"^[^/]+$": {
							"title": "Directory",
							"type": "object",
							"properties": {
								"user": { "type": "string" },
								"group": { "type": "string" },
								"d_mode": { "type": "string" },
								"f_mode": { "type": "string" },
								"optional": { "type": "string" },
								"optional_default": { "type": "boolean" },
								"allow_specials": { "type": "boolean" },
								"contents": {
									"user": { "type": "string" },
									"group": { "type": "string" },
									"d_mode": { "type": "string" },
									"f_mode": { "type": "string" }
								}
							},
							"additionalProperties": false
						}
					},
					"additionalProperties": false
				}
			},
			"required": [ "user", "group", "d_mode", "f_mode", "directories" ],
			"additionalProperties": false
		},
		"site_types": {
			"type": "object",
			"patternProperties": {
				"^[a-z]+$": {
					"title": "Site Type",
					"type": "object",	
					"properties": {
						"temp_dirs": {
							"type": "array",
							"items": {
								"type": "string",
								"pattern": "^(/[^/]+)+$"
							}
						},
						"world_writable_dirs": {
							"type": "array",
							"items": {
								"type": "string",
								"pattern": "^(/[^/]+)+$"
							}
						},
						"read_only_files": {
							"type": "array",
							"items": {
								"type": "string",
								"pattern": "^(/[^/]+)+$"
							}
						}
					},
					"additionalProperties": false
				}
			},
			"additionalProperties": false
		},
		"sites": {
			"type": "object",
			"patternProperties": {
				"^(/[^/]+)+$": {
					"title": "Site Folder",
					"type": "object",
					"properties": {
						"user": {
							"type": "string",
							"pattern": "^[a-z][a-z0-9]+$"
						},
						"type": {
							"type": "string"
						},
						"world_writable_dirs": {
							"type": "array",
							"items": {
								"type": "string",
								"pattern": "^(/[^/]+)+$"
							}
						},
						"read_only_files": {
							"type": "array",
							"items": {
								"type": "string",
								"pattern": "^(/[^/]+)+$"
							}
						},
						"server_owned_files": {
							"type": "array",
							"items": {
								"type": "string",
								"pattern": "^(/[^/]+)+$"
							}
						},
						"ignore_permissions": {
							"type": "array",
							"items": {
								"type": "string",
								"pattern": "^(/[^/]+)+/?$"
							}
						},
						"options": {
							"type": "object",
							"patternProperties": {
								"^[a-zA-Z0-9_]+$": {
									"type": "boolean"
								}
							},
							"additionalProperties": false
						}
					},
					"required": [ "user", "type" ],
					"additionalProperties": false
				}
			},
			"additionalProperties": false
		}
	},
	"additionalProperties": false
}
